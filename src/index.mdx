import { Head, Appear, Image } from 'mdx-deck';
import { Split } from 'mdx-deck/layouts';

import { SmallText } from './components/SmallText.js';
import { Text } from './components/Text.js';

export { theme } from './theme';

<Head>
  <title>TypeScript</title>
</Head>

![](assets/images/ts-logo.png)

---

# _Why?!_

---

---

# 🔮

# 45 minutes from now

<Appear>
  <img src="assets/images/yawn.png" />
</Appear>

---

# 🔮

# 45 minutes from now

<Appear>
  <div>
    <Text>1. You know why TS exists</Text>
  </div>
  <div>
    <Text>2. You know why developers use (and love) TS</Text>
  </div>
  <div>
    <Text>3. 🤞 You really really wanna give TS a go! 🤞</Text>
  </div>
</Appear>

```notes
- Different skills
- NOT a focus on "HOW" to write TS (another time)
```

---

# How do you prevent bugs in your code?

```notes
NOT a rhetorical question. Get some answers!
```

---

# Documentation!

---

<Appear>
  <div>
    <Text>- Name everything correctly</Text>
  </div>
  <div>
    <Text>- Sprinkle around some JSDoc when needed</Text>
  </div>
</Appear>

---

```js
function getUsersInSuburb(suburb) {
  return getPeople().filter(u => u.suburb === suburb);
}

/**
 * @param somebody - A person from the database
 */
function sendGifts(somebody) {}

/**
 * @property {Object} person
 * @property {string} person.name
 * @property {number} person.age
 */
function logUser(user) {
  console.log(`${user.firstName} ${user.lastName} - ${user.age}`);
}
```

---

# Documentation 😞

- ❌ Easily out of date
- ❌ Difficult to refactor
- ❌ Ambiguous
- ❌ Often ignored
- ✅ Sometimes useful (e.g. hacks)

---

# How do you prevent bugs in your code?

---

# Defensive coding!

---

```js
function startApp(app, port) {
  if (port === undefined) {
    throw new TypeError('Port is required');
  }
  if (!Number.isInteger(port)) {
    throw new TypeError('Port must be a number');
  }
  // ...
}
```

---

```js
if (person.firstName && person.lastName) {
  sayHello(person);
}
```

---

```js
function sendGifts(somebody) {
  const countryCode =
    somebody &&
    somebody.address &&
    somebody.address.country &&
    somebody.address.shortCode;

  if (!countryCode) {
    return;
  }
}
```

---

# Defensive coding

- ❌ A lot of code to write, read, and maintain
- ❌ Easy to forget checking something
- ❌ Easy to get wrong
- ❌ Code anxiety
- ✅ Interacting with unpredictable sources (e.g. user input, external APIs)

```notes
1. "What's this code for?" - "Oh, just to be safe" 🙄

- Anxiety = Will I receive the right inputs? Do I trust this function before passing in the inputs?
```

---

# How do you prevent bugs in your code?

---

# Unit tests!

---

```js
test('it should throw an error when person is undefined', () => {
  expect(() => sendGifts()).toThrow();
});
test('it should throw an error when person is null', () => {
  expect(() => sendGifts(null)).toThrow();
});
test('it should throw an error when person is empty', () => {
  expect(() => sendGifts({})).toThrow();
});
test('it should throw an error when missing address', () => {
  expect(() => sendGifts(userWithNoAddress)).toThrow();
});
test('it should throw an error when missing country code', () => {
  expect(() => sendGifts(userWithNoCountryCode)).toThrow();
});
```

```notes
Testing *one* parameter for *one* function
```

---

# Unit tests 😞

- ❌ Lots of code to write, read, and maintain
- ❌ You need to test _a lot_ (every function, every param, every response)
- ❌ Easy to forget to test something - things slip through the cracks
- ❌ Annoying to maintain - update code, then fix unit tests
- ✅ Testing business logic and custom features

---

# How do you prevent bugs in your code?

---

# YOLO!

"If someone calls my function incorrectly,
I'm sure an error will happen _eventually_"

---

```
Uncaught TypeError: Cannot read property 'name' of undefined.
```

```
Uncaught TypeError: ‘undefined’ is not a function.
```

```
Uncaught TypeError: map is not a function.
```

```
Uncaught TypeError: Cannot read property ‘length’.
```

```notes
You see this in your logs, you're in for a murder mystery
```

---

# YOLO 😞

- ❌ Errors may be cryptic
- ❌ Difficult to find source and reason of error
- ❌ Errors occur in unexpected places
- ❌ Errors may bubble up (and crash the entire app)
- ❌ "It works!" - are you sure?
- ❌ Silent failures

---

# How do you prevent bugs in your code?

---

# TypeScript

😍 🙌 🌈 ✨ 🦄

---

# What is TypeScript?

---

## It's a programming language

---

<Image src="assets/images/scared.jpg" />

---

<img src="assets/images/js-ts.png" />

---

## All JS code works fine in TS land!

<Appear>
  <div>
    <Text>✅ Your JS code</Text>
  </div>
  <div>
    <Text>✅ Third party JS code</Text>
  </div>
  <div>
    <Text>✅ Yes really - JS works fine in TS!</Text>
  </div>
</Appear>

---

## TS compiles to JS

<Appear>
  <div style={{ margin: '50px' }}>
    <span
      style={{ border: '2px solid white', padding: '10px', margin: '10px' }}
    >
      .sass
    </span>
    <span style={{ margin: '10px' }}>👉</span>
    <span
      style={{ border: '2px solid yellow', padding: '10px', margin: '10px' }}
    >
      SASS Compiler
    </span>
    <span style={{ margin: '10px' }}>👉</span>
    <span
      style={{ border: '2px solid white', padding: '10px', margin: '10px' }}
    >
      .css
    </span>
  </div>
  <div style={{ margin: '50px' }}>
    <span
      style={{ border: '2px solid white', padding: '10px', margin: '10px' }}
    >
      Modern JS
    </span>
    <span style={{ margin: '10px' }}>👉</span>
    <span
      style={{ border: '2px solid yellow', padding: '10px', margin: '10px' }}
    >
      Babel compiler
    </span>
    <span style={{ margin: '10px' }}>👉</span>
    <span
      style={{ border: '2px solid white', padding: '10px', margin: '10px' }}
    >
      Compatible JS
    </span>
  </div>
  <div style={{ margin: '50px' }}>
    <span
      style={{ border: '2px solid white', padding: '10px', margin: '10px' }}
    >
      .ts
    </span>
    <span style={{ margin: '10px' }}>👉</span>
    <span
      style={{ border: '2px solid yellow', padding: '10px', margin: '10px' }}
    >
      TypeScript Compiler (tsc)
    </span>
    <span style={{ margin: '10px' }}>👉</span>
    <span
      style={{ border: '2px solid white', padding: '10px', margin: '10px' }}
    >
      .js
    </span>
  </div>
</Appear>

---

<Appear>
  <h2>⌨️ You: Write TS</h2>
  <h2>🍽 TSC: Eats TS files</h2>
  <h2>💩 TSC: Poops out JS files</h2>
  <h2>🌎 Everything: Consumes JS (as usual)</h2>
  <div>(browser, node, lambda, third party)</div>
  <h1>Nobody knows you wrote TS</h1>
</Appear>

---

# TypeScript

## Quick recap

<Appear>
  <div>
    <Text>✅ Adds new features to JS</Text>
  </div>
  <div>
    <Text>✅ Works with JS code</Text>
  </div>
  <div>
    <Text>✅ Compiles back to JS code</Text>
  </div>
</Appear>

---

# TS is not a big scary new thing

---

<div
  style={{
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between',
  }}
>
  <div style={{ width: '50%' }}>
    <img src="assets/images/js.png" style={{ width: '100%' }} />
  </div>
  <div style={{ margin: '50px' }}>
    <div style={{ fontSize: '2em' }}>+</div>
  </div>
  <div style={{ width: '50%' }}>
    <img src="assets/images/superpower-1.jpg" style={{ width: '100%' }} />
  </div>
</div>

---

# Quiz time!

---

# Spot the Javascript

#1

```js
var title = ['TypeScript', 'is', 'really', 'cool'].join(' ').toUpperCase();
```

#2

```js
define "title" = create Array("TypeScript", "is", "really", "cool")
  then, implode with ' '
  then, stringToUpper
```

---

```js
var title = ['TypeScript', 'is', 'really', 'cool'].join(' ').toUpperCase();
```

---

# Quiz time: for two points!

---

Which organisation decided _this_ is JavaScript:

```js
var title = ['TypeScript', 'is', 'really', 'cool'].join(' ').toUpperCase();
```

But this is _not_ JavaScript:

```js
define "title" = create Array("TypeScript", "is", "really", "cool")
  then, implode with ' '
  then, stringToUpper
```

---

![](assets/images/ecma-logo.png)

---

# Who?!

<Appear>
  <div>
    <Text>Let's check their website...</Text>
  </div>
</Appear>

---

![](assets/images/ecma-website.png)

<Appear>
  <div>
    <Text>Not much help...</Text>
  </div>
</Appear>

---

![](assets/images/ecma-logo.png)

<Appear>
  <div>
    <Text>• An organisation</Text>
  </div>
  <div>
    <Text>• 1961</Text>
  </div>
  <div>
    <Text>• Not for profit</Text>
  </div>
  <div>(explains the website)</div>
</Appear>

---

![](assets/images/ecma-logo.png)

They develop standards:

<Appear>
  <div>• CD-ROM file structure</div>
  <div>• C#</div>
  <div>• CLI</div>
  <div>• Open Office XML</div>
  <div>• JSON</div>
  <div>• Dart</div>
  <div>
    <Text>and...</Text>
  </div>
</Appear>

---

# ECMAScript

<Appear>
  <div>
    <Text>• Generic language</Text>
  </div>
  <div>
    <Text>• Any language can follow ECMAScript standards</Text>
  </div>
  <div>
    <Text>Including...</Text>
  </div>
  <div>
    <Text>• ActionScript</Text>
  </div>
  <div>
    <Text>• JavaScript</Text>
  </div>
  <div>
    <Text>• TypeScript</Text>
  </div>
</Appear>

```notes
Maybe touch on ES6 / ES2015
```

---

# Quiz time: for three points!

<div style={{ maxWidth: '70%', margin: '0 auto' }}>
  <Appear>
    <div>
      <Text>
        Which committee, formed by ECMA International, meet fortnightly to
        discuss ECMAScript?
      </Text>
    </div>
  </Appear>
</div>

---

![](assets/images/TC39.png)

<Appear>
  <div>
    <Text>Once a fortnight:</Text>
  </div>
  <div>
    <Text>• Discuss proposals</Text>
  </div>
  <div>
    <Text>• Get drunk</Text>
  </div>
</Appear>

---

# 4 stages of a TC39 proposal

---

# 🤔

## Stage 1

### Proposal

TC39 devotes time to examining problem and solution

---

# ✏️

## Stage 2

### Draft

• Work on the syntax and formal specs

• TC39 expects the feature to be developed and included in the standard

---

# ⌨️

## Stage 3

### Candidate

The proposal is ready to be implemented in code

---

# 🎉

## Stage 4

### Finished

The feature is added to the next ECMAScript release

---

# TC39 proposals are on GitHub

https://github.com/tc39/proposals

---

# JS + TS

Super quick history

![](assets/images/books.png)

---

<Image src="assets/images/yawn.gif" />

---

# December 1999

## ES3

- Regex
- Try / catch

---

# October 2008

(~9 years later)

## ES4

- Abandoned
- "Political differences"
- Public fueds between Netscape, Mozilla, and Microsoft
- Fun fact: Macromedia implemented ES4 into ActionScript!

---

# December 2009

(~1 year later)

## ES5

- Strict mode
- Aligning and clarifying existing standards
- (Not much)

---

# Meanwhile

Someone was getting impatient...

---

![](assets/images/microsoft.jpg)

---

# And especially...

---

# THIS GUY

![](assets/images/anders.jpg)

## Anders Hejlsberg

- Works at Microsoft
- Lead architect of C#
- Creator of TypeScript

---

![](assets/images/anders-sad-angry.jpg)

- Reaching Stage 4 takes too long
- Politics & BS = >:(

```notes
Want those proposed features _now_!
```

---

# 2010

(~1 year late after ES5)

- Anders started working on TypeScript
- Started implementing <strong>Stage 3</strong> (candidate) proposals

---

# October 2012

(~2 years later)

## 🎉 First TypeScript release 🎉

- Classes
- Arrow functions
- Default parameters
- Promises
- Modules
- Destructuring
- Template strings
- More!!

```notes
- Look familiar
- 2012
```

---

# June 2015

(~3 years later)

## 🎉 ES6 release 🎉

- All the features listed before

---

# November 2015

(~3 months later)

- TS supports async / await

---

# June 2017

(~1.5 years later)

- ES8 supports async / await

---

# History - Recap

- MS / Anders created TS because JS was slow and political
- TS implements TC39 proposals at Stage 3 (candidate)
- TS and JS features were _very different_ until 2015 (ES6)
- TS and JS features are _pretty similar_ these days

```notes
- Decorators is actually Stage 2, but really wanted it for Angular 2
```

---

export default Split;

<img src="assets/images/js-ts.png" />

- Decorators
- Abstract classes
- Read only properties
- Private / protected properties
- Static types
- ☝️ ?!?

---

# Static types

It's the biggest differentiator

<strong style={{ fontSize: '2em' }}>
  <u>Type</u>Script
</strong>

---

# QUIZ TIME!

---

```javascript
const name = 'Jeremy';
const age = 54;
const answer = name + age;
console.log(answer);
```

---

```javascript
const name = 'Jeremy';
const age = 54;
const answer = name + age;
console.log(answer);
```

```
"Jeremy54"
```

---

# What happened?

```javascript
// HEY, MY NAME IS JAVASCRIPT
// HERE I GO!

const name = 'Jeremy'; // AWESOME!
const age = 54; // ALRIGHT!
const answer = name + age; // HUH? HANG ON...
const answer = name + new Number(age).toString(); // THAT'S BETTER!
console.log(answer); // COOL!

// "Jeremy54"
```

---

# Weak types

<Appear>
  <div>
    <img src="assets/images/macgyver.jpg" />
  </div>
  <div>
    <Text>
      • JS
      <br />
      • TS
      <br />
      • PHP
      <br />• C
    </Text>
  </div>
</Appear>

---

```javascript
const name = 'Jeremy';
const age = 54;
const answer = name + age;
console.log(answer);
```

❌ Nope! Throw an error.

---

# Strong types

<Appear>
  <div>
    <img src="assets/images/no-deal.png" />
  </div>
  <div>
    <Text>
      • Python
      <br />
      • Ruby
      <br />
      • C#
      <br />• Java
    </Text>
  </div>
</Appear>

---

# QUIZ TIME AGAIN

---

```js
const name = 'Jeremy';
const answer1 = name.toLowerCase();
console.log(answer1);

const age = 42;
const answer2 = age.toLowerCase();
console.log(answer2);

const answer3 = name + age;
console.log(answer3);
```

---

```
"jeremy"
TypeError: age.toLowerCase is not a function
```

---

```js
// HEY, MY NAME IS JAVASCRIPT
// HERE I GO!

const name = 'Jeremy'; // SURE!
const answer1 = name.toLowerCase(); // SOUNDS GOOD!
console.log(answer1); // ALRIGHTY!

const age = 42; // YEP!
const answer2 = age.toLowerCase(); // NOPE. BYE.
console.log(answer2);

const answer3 = name + age;
console.log(answer3);
```

---

# Dynamic types

<img src="assets/images/soccer.gif" />

<Appear>
  <div>
    <Text>
      • JS
      <br />
      • Python
      <br />
      • Ruby
      <br />• PHP
    </Text>
  </div>
</Appear>

---

```js
const name = 'Jeremy';
const answer1 = name.toLowerCase();
console.log(answer1);

const age = 42;
const answer2 = age.toLowerCase();
console.log(answer2);

const answer3 = name + age;
console.log(answer3);
```

Type checker / compiler:

❌ "Woah, hey, no, stop! SOMETHING IS WRONG!"

👎 "I'm not gonna even run this code!"

---

# Static types

<img src="assets/images/checking.jpg" />

<Appear>
  <div>
    <Text>
      • Java
      <br />
      • C#
      <br />• C
    </Text>
  </div>
  <div>
    <Text>
      and... <strong>TypeScript!</strong>
    </Text>
  </div>
</Appear>

---

<table style={{ fontSize: '2em' }}>
  <tr>
    <td>&nbsp;</td>
    <td style={{ padding: '30px' }}>
      <strong>🐧⚽️ Dynamic</strong>
    </td>
    <td style={{ padding: '30px' }}>
      <strong>👷‍♀️🔍 Static</strong>
    </td>
  </tr>
  <tr>
    <td style={{ padding: '30px' }}>
      <strong>🛠 Weak</strong>
    </td>
    <td style={{ padding: '30px', border: '1px solid white' }}>
      • JavaScript
      <br />• PHP
    </td>
    <td style={{ padding: '30px', border: '1px solid white' }}>
      • TypeScript
      <br />• C
    </td>
  </tr>
  <tr>
    <td style={{ padding: '30px' }}>
      <strong>🚫 Strong</strong>
    </td>
    <td style={{ padding: '30px', border: '1px solid white' }}>
      • Python
      <br />• Ruby
    </td>
    <td style={{ padding: '30px', border: '1px solid white' }}>
      • C#
      <br />• Java
    </td>
  </tr>
</table>

---

# TYPES RECAP

- TS is weakly typed 🛠
- TS is statically typed

<div style={{ margin: '50px' }}>
  <span style={{ border: '2px solid white', padding: '10px', margin: '10px' }}>
    .ts
  </span>
  <span style={{ margin: '10px' }}>👉</span>
  <span style={{ border: '2px solid yellow', padding: '10px', margin: '10px' }}>
    tsc
  </span>
  <span style={{ margin: '10px' }}>👉</span>
  <span style={{ border: '2px solid red', padding: '10px', margin: '10px' }}>
    👷👷‍♀️🔍 Type checking
  </span>
  <span style={{ margin: '10px' }}>👉</span>
  <span style={{ border: '2px solid white', padding: '10px', margin: '10px' }}>
    .js
  </span>
</div>

---

# PRESO RECAP

- You know what TS is (a language based on JS)
- You know why TS was created (JS was slow, MS wanted modern features now)
- You know the main difference between JS + TS (Static types)

---

# What's so good about static types?

- I've been coding in JS for years just fine!

---

```js
function startApp(app) {
  // ...
}
```

Task: Add `port` parameter.

- Port is required
- The port must be a number

---

- Defensive coding
- Unit tests
- Documentation

---

```ts
function startApp(app: ExpressApplication, port: number) {
  // ...
}
```

---

```ts
startApp(app, 80);
```

<div style={{ margin: '50px' }}>
  <span style={{ border: '2px solid white', padding: '10px', margin: '10px' }}>
    .ts
  </span>
  <span style={{ margin: '10px' }}>👉</span>
  <span style={{ border: '2px solid yellow', padding: '10px', margin: '10px' }}>
    tsc
  </span>
  <span style={{ margin: '10px' }}>👉</span>
  <span style={{ border: '2px solid red', padding: '10px', margin: '10px' }}>
    👷👷‍♀️🔍 Type checking
  </span>
  <span style={{ margin: '10px' }}>👉</span>
  <span style={{ border: '2px solid green', padding: '10px', margin: '10px' }}>
    ✅
  </span>
  <span style={{ margin: '10px' }}>👉</span>
  <span style={{ border: '2px solid white', padding: '10px', margin: '10px' }}>
    .js
  </span>
</div>

---

```ts
startApp(app, '80');
```

<div style={{ margin: '50px' }}>
  <span style={{ border: '2px solid white', padding: '10px', margin: '10px' }}>
    .ts
  </span>
  <span style={{ margin: '10px' }}>👉</span>
  <span style={{ border: '2px solid yellow', padding: '10px', margin: '10px' }}>
    tsc
  </span>
  <span style={{ margin: '10px' }}>👉</span>
  <span style={{ border: '2px solid red', padding: '10px', margin: '10px' }}>
    👷👷‍♀️🔍 Type checking
  </span>
  <span style={{ margin: '10px' }}>👉</span>
  <span style={{ border: '2px solid red', padding: '10px', margin: '10px' }}>
    ❌ Error - startApp() - 'port' must be a number
  </span>
</div>

---

Task: Allow port to be set by environment

---

```ts
startApp(app, process.env.PORT);
```

---

![](assets/images/start-app-1.png)

---

![](assets/images/start-app-2.png)

---

```ts
// util.ts

export function toNumber(x: string): number {
  return parseInt(x, 10);
}
```

---

```ts
// util.ts

export const toNumber = (x: string): number => parseInt(x, 10);
```

---

```ts
const port: number = toNumber(process.env.PORT);

startApp(app, port);
```

---

```ts
const port = toNumber(process.env.PORT);

startApp(app, port);
```

---

![](assets/images/start-app-3.png)

---

![](assets/images/start-app-4.png)

---

```ts
const port = process.env.PORT && toNumber(process.env.PORT);

startApp(app, port);
```

---

![](assets/images/start-app-5.png)

---

![](assets/images/start-app-6.png)

---

```ts
const port = process.env.PORT ? toNumber(process.env.PORT) : 80;

startApp(app, port);
```

---

# 🤖 🔍 ✅

## A helpful robot sidekick

Helping you write better code

```notes
Linting on steroids
```

---

```ts
function sendGifts(somebody: Person) {
  // ...
}
```

---

```ts
interface Person {
  firstName: string;
  lastName: string;
  address: Address;
}
```

---

```ts
interface Address {
  street: string;
  suburb: string;
  country: Country;
}
```

---

```ts
interface Country {
  name: string;
  shortCode: string;
}
```

---

![](assets/images/doc-demo.gif)

---

```js
function sendGifts(somebody) {
  const countryCode =
    somebody &&
    somebody.address &&
    somebody.address.country &&
    somebody.address.shortCode;

  if (!countryCode) {
    return;
  }
}
```

---

```ts
function sendGifts(somebody) {
  const countryCode = somebody.address.country.shortCode;
}
```

---

![](assets/images/autocomplete.gif)

---

```ts
const jeremy: Person = {
  firstName: 'Jeremy',
  lastName: 'Bearimy',
  address: {
    street: '42 Batman Road',
    suburb: 'Melbourne',
    country: {
      name: 'Australia',
      shortCode: 'AU',
    },
  },
};
```

---

```ts
const incompleteJeremy: Person = {
  firstName: 'Jeremy',
  address: {
    suburb: 'Melbourne',
  },
};
```

---

Task: Change 'address' to an array

---

```ts
interface Person {
  firstName: string;
  lastName: string;
  address: [Address];
}
```

---

![](assets/images/folders.jpg)

```notes
Can you guarantee you didn't break anything?

TYPESCRIPT CAN!
```

---

# 😅

---

# TS 👍

<Appear>
  <div>
    ✅ Helpful robot sidekick
  </div>
  <div>
    ✅ Less mistakes
  </div>
  <div>
    ✅ Autocomplete
  </div>
  <div>
    ✅ Up-to-date docs
  </div>
  <div>
    ✅ Code confidence
  </div>
  <div>
    ✅ Less code to write, read, and maintain
  </div>
  <div>
    ✅ Less unit tests
  </div>
  <div>
    ✅ Improve error messages and debugging
  </div>
  <div>
    ✅ Helps refactor
  </div>
</Appear>

---

# You made it!

<Appear>
  <div>
    <Text>1. You know why TS exists</Text>
  </div>
  <div>
    <Text>2. You know why developers use (and love) TS</Text>
  </div>
  <div>
    <Text>3. 🤞 You really really wanna give TS a go! 🤞</Text>
  </div>
</Appear>
